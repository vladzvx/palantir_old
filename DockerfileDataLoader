FROM python:3.9

WORKDIR /app
EXPOSE 5555


COPY ./DataLoader/requirements.txt requirements.txt
COPY ./Common/Configurator.proto Configurator.proto
COPY ./Common/OrderBoard.proto OrderBoard.proto

RUN ls -l

RUN pip3 install -r requirements.txt
COPY /DataLoader/ .
RUN ls -l

RUN python3 -m grpc_tools.protoc -I /app --python_out=/app --grpc_python_out=. /app/Configurator.proto
RUN python3 -m grpc_tools.protoc -I /app --python_out=/app --grpc_python_out=. /app/OrderBoard.proto

RUN ls -l


CMD ["python3", "./DataLoader.py"]
